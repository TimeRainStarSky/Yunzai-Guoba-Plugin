import{d as e,p as a}from"./esm.js";import{a as l,b as t,r as s,e as o,o as i,i as n,j as d,an as r,x as c,f as u,N as p,k as m,R as v,M as f,l as g,al as b,am as y}from"./index.js";const w=e=>(b("data-v-79b47af2"),e=e(),y(),e),h={class:"frame"},k={key:1},x={class:"wrap"},L=w((()=>r("div",null,"替换",-1))),R={class:"wrap"},_=w((()=>r("input",{type:"file",id:"upload1",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),I=g("选择图片"),j={key:0},B=g("确定"),U=w((()=>r("div",{class:"tip"},"请使图片尽量填满取景框",-1)));var A=l(t({__name:"IconUploader",props:{uploader:Object,iconB64List:Array},setup(l){const t=l,g=s(null),b=()=>{let e=document.getElementById("upload1");void 0===e.bind&&(e.bind=!0,e.addEventListener("change",(e=>{let a=e.target.files;if(0!==a.size){let e=a[0],l=new FileReader;l.readAsDataURL(e),l.onload=()=>{g.value=l.result}}}))),e.click()},y=()=>{let e=t.uploader.selected;a.getFile().then((a=>{let l=document.createElement("canvas");l.width=100,l.height=100;let s=new FileReader;s.onload=function(){let a=l.getContext("2d"),o=new Image;o.src=s.result,o.onload=function(){a.textAlign="center",a.font="bold 14px sans-serif",a.drawImage(o,0,0,80,80),a.fillText(e,40,95),t.iconB64List[e]=l.toDataURL(),g.value=null}},s.readAsDataURL(a)}))};return document.getElementById("upload1"),(a,t)=>{const s=o("a-button");return i(),n(c(f),{visible:l.uploader.show,"onUpdate:visible":t[0]||(t[0]=e=>l.uploader.show=e),width:"420px",closable:!1,footer:null},{default:d((()=>[r("div",h,[g.value?(i(),n(c(e),{key:0,boxStyle:{height:"300px",width:"100%",backgroundColor:"#f8f8f8"},img:g.value,options:{viewMode:1,dragMode:"move",aspectRatio:1}},null,8,["img"])):(i(),u("div",k,[r("div",x,[L,r("div",{class:"icon",style:p(`background: url(${l.iconB64List[l.uploader.selected]}) 0 0 no-repeat`)},null,4)])])),r("div",R,[_,m(s,{block:"",type:"info",onClick:b},{default:d((()=>[I])),_:1}),g.value?(i(),u("div",j,[m(s,{block:"",type:"success",onClick:y},{default:d((()=>[B])),_:1}),U])):v("",!0)])])])),_:1},8,["visible"])}}}),[["__scopeId","data-v-79b47af2"]]);export{A as default};
