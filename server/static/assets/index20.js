import{x as r,b as e,r as t,y as o,fy as s,w as i,q as n,ci as a,e as l,o as m,f as p,F as u,h as d,N as j,av as c,k as f,s as y,j as x,l as g,m as b,i as v,V as h}from"./index.js";import w from"./DetailModal.js";import{B as k}from"./TableImg.js";import{T as L}from"./BasicForm.js";import{u as C}from"./useTable.js";import{a as T}from"./index2.js";import{getColumns as _}from"./data2.js";import"./index15.js";import"./get.js";import"./index3.js";import"./index14.js";import"./index16.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./index5.js";import"./index6.js";import"./merge.js";import"./upperFirst.js";import"./_baseIteratee.js";import"./sortable.esm.js";import"./RedoOutlined.js";import"./FullscreenOutlined.js";import"./scrollTo.js";import"./index21.js";import"./index22.js";import"./index4.js";import"./find.js";import"./useFormItem.js";import"./DeleteOutlined.js";import"./download.js";import"./index7.js";import"./index8.js";import"./uniqBy.js";const F={class:"p-4"},R=["src"],A=e({__name:"index",setup(e){const A=t(),D=t([]),{t:E}=o(),I=s(),[O,{setTableData:B}]=C({title:E("sys.errorLog.tableTitle"),columns:_(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[M,{openModal:V}]=T();function q(r){A.value=r,V(!0)}function P(){throw new Error("fire vue error!")}function z(){D.value.push(`${(new Date).getTime()}.png`)}function H(){return e=this,t=null,o=function*(){yield r.get({url:"/error"})},new Promise(((r,s)=>{var i=r=>{try{a(o.next(r))}catch(e){s(e)}},n=r=>{try{a(o.throw(r))}catch(e){s(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,n);a((o=o.apply(e,t)).next())}));var e,t,o}return i((()=>I.getErrorLogInfoList),(r=>{n((()=>{B(a(r))}))}),{immediate:!0}),(r,e)=>{const t=l("a-button");return m(),p("div",F,[(m(!0),p(u,null,d(D.value,(r=>j((m(),p("img",{key:r,src:r,alt:""},null,8,R)),[[c,!1]]))),128)),f(w,{info:A.value,onRegister:y(M)},null,8,["info","onRegister"]),f(y(k),{onRegister:y(O),class:"error-handle-table"},{toolbar:x((()=>[f(t,{onClick:P,type:"primary"},{default:x((()=>[g(b(y(E)("sys.errorLog.fireVueError")),1)])),_:1}),f(t,{onClick:z,type:"primary"},{default:x((()=>[g(b(y(E)("sys.errorLog.fireResourceError")),1)])),_:1}),f(t,{onClick:H,type:"primary"},{default:x((()=>[g(b(y(E)("sys.errorLog.fireAjaxError")),1)])),_:1})])),bodyCell:x((({column:r,record:e})=>["action"===r.key?(m(),v(y(L),{key:0,actions:[{label:y(E)("sys.errorLog.tableActionDesc"),onClick:q.bind(null,e)}]},null,8,["actions"])):h("",!0)])),_:1},8,["onRegister"])])}}});export{A as default};
