var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&r(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&r(e,n,t[n]);return e},i=(e,a)=>t(e,n(a));import{a as u,b as p,p as f,r as c,c as d,w as m,t as b,e as y,o as g,f as h,F as v,h as j,i as w,j as O,k as C,l as P,m as k,n as V,q as F,u as x}from"./index.js";import"./PathSelect.js";import"./index2.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./index3.js";var I=u(p({name:"GTags",inheritAttrs:!1,props:{value:f.array.def((()=>[])),allowAdd:f.bool.def(!1),allowDel:f.bool.def(!1),showPrompt:f.bool.def(!1),promptProps:f.object.def((()=>({}))),valueFormatter:f.oneOfType([f.func,f.string])},emits:["change"],setup(e,{emit:t}){const{createPrompt:n}=x(),a=c(),o=d({tags:[],inputVisible:!1,inputValue:""});function l(){const e=o.inputValue;let t=o.tags;e&&-1===t.indexOf(e)&&(t=[...t,r(e)]),Object.assign(o,{tags:t,inputVisible:!1,inputValue:""}),u()}function r(t){if(e.valueFormatter){if("function"!=typeof e.valueFormatter)return new Function(`return ${e.valueFormatter}`)()(t);e.valueFormatter(t)}return t}function u(){t("change",o.tags)}return m((()=>e.value),(e=>{o.tags=null==e?[]:e}),{immediate:!0}),i(s({},b(o)),{handleClose:function(e){o.tags=o.tags.filter((t=>t!==e)),u()},showInput:function(){e.showPrompt?n(i(s({title:"添加",required:!0},e.promptProps),{onOk(e){o.inputValue=e,l()}})):(o.inputVisible=!0,F((()=>{a.value.focus()})))},handleInputConfirm:l,inputRef:a})}}),[["render",function(e,t,n,a,o,l){const r=y("a-tag"),s=y("a-tooltip"),i=y("a-input"),u=y("icon");return g(),h(v,null,[(g(!0),h(v,null,j(e.tags,(t=>(g(),h(v,{key:t},[t.length>20?(g(),w(s,{key:0,title:t},{default:O((()=>[C(r,{closable:"",onClose:n=>e.handleClose(t)},{default:O((()=>[P(k(`${t.slice(0,20)}...`),1)])),_:2},1032,["onClose"])])),_:2},1032,["title"])):(g(),w(r,{key:1,closable:"",onClose:n=>e.handleClose(t)},{default:O((()=>[P(k(t),1)])),_:2},1032,["onClose"]))],64)))),128)),e.inputVisible?(g(),w(i,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":t[0]||(t[0]=t=>e.inputValue=t),type:"text",size:"small",style:{width:"78px"},onBlur:e.handleInputConfirm,onKeyup:V(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(g(),w(r,{key:1,style:{background:"#fff","border-style":"dashed",cursor:"pointer"},onClick:e.showInput},{default:O((()=>[C(u,{icon:"ant-design:plus"}),P(" 新增 ")])),_:1},8,["onClick"]))],64)}]]);export{I as default};
