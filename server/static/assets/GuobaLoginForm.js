var e=(e,t,o)=>new Promise(((n,a)=>{var s=e=>{try{l(o.next(e))}catch(t){a(t)}},r=e=>{try{l(o.throw(e))}catch(t){a(t)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,r);l((o=o.apply(e,t)).next())}));import{a as t}from"./common.js";import{b as o,d9 as n,r as a,e as s,o as r,f as l,k as i,j as u,l as c,F as d,u as m,aL as p}from"./index.js";import"./PathSelect.js";import"./index2.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./index3.js";const g=o({__name:"GuobaLoginForm",setup(o){const g=n(),{createPrompt:h}=m(),y=a(!1),{createMessage:f}=p();function k(){return e(this,null,(function*(){try{y.value=!0,yield g.loginCodeRequest()}catch(o){}finally{y.value=!1}h({title:"验证码登录",required:!0,placeholder:"请输入验证码",bottomHelpMessage:"验证码可在控制台查看",rules:[{required:!0,message:"请输入验证码"},{min:16,message:"验证码格式不正确"}],okText:"登录",onOk(o){return e(this,null,(function*(){const e=yield g.loginCodeCheck(o);(null==e?void 0:e.token)?(g.setToken(e.token),yield t(500),window.location.reload()):f.error("登录失败")}))}})}))}return(e,t)=>{const o=s("a-empty"),n=s("a-button");return r(),l(d,null,[i(o,{style:{margin:"0 auto"}},{description:u((()=>[c(" 请以主人的身份，向你的机器人发送“#锅巴登录”指令进行登录。")])),_:1}),i(n,{block:"",onClick:k,loading:y.value},{default:u((()=>[c(" 使用验证码登录")])),_:1},8,["loading"])],64)}}});export{g as default};
