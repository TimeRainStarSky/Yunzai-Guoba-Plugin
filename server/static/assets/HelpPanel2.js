import{a as e,b as l,fY as a,eQ as t,r as i,I as s,e as n,o,f as c,v as r,k as d,j as p,O as u,s as m,c8 as v,m as g,F as h,h as f,W as b,ax as y,V as k,l as j,M as B,d0 as L,d1 as C,aL as x}from"./index.js";import I from"./EditBodyModal2.js";import{a as $}from"./miao.api.js";import{a as M}from"./index2.js";import _ from"./UploadIconHelpModal2.js";import"./index6.js";import"./SelectIconModal2.js";import"./IconUploader2.js";import"./esm.js";import"./base64Conver.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./21ae6624.js";const w=e=>(L("data-v-4eeeea14"),e=e(),C(),e),D={class:"change-background"},O=w((()=>r("input",{type:"file",id:"upload-bg",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),U=w((()=>r("input",{type:"file",id:"upload-icon",style:{display:"none"},name:"icon",accept:"image/png"},null,-1))),z={class:"title"},F={class:"label"},P=["onClick"],R={key:0,class:"help-table"},S=["onClick"],T={class:"help-title"},W={class:"help-desc"},E={class:"copyright"},V={class:"version"},A={class:"version"},H={class:"p-4"},Y={class:"row"},N=w((()=>r("div",null,"主标题",-1))),Q={class:"flex-1"},q={class:"row"},G=w((()=>r("div",null,"副标题",-1))),J={class:"flex-1"};var K=e(l({__name:"HelpPanel",props:{helpCfg:Object,helpList:Object,bgB64:String,mainB64:String,cacheVer:Number,iconB64List:Array,modelData:Object,versions:Object},emits:["update:modelData","update:mainB64","update:iconB64List"],setup(e,{emit:l}){const L=a(),C=t(),[w,K]=M(),X=e,Z=l,{createMessage:ee}=x(),le=i(!1),ae=i([{event:"changeBackground",text:"更换背景",icon:"akar-icons:image",onClick(){se("upload-bg",(e=>{Z("update:mainB64",e)}))}},{event:"uploadIcon",text:"上传图标",icon:"fontisto:nav-icon-grid",onClick(){let e=()=>{se("upload-icon",(e=>{return l=this,a=null,t=function*(){let l=yield $(e);Z("update:iconB64List",l),ee.success("上传成功")},new Promise(((e,i)=>{var s=e=>{try{o(t.next(e))}catch(l){i(l)}},n=e=>{try{o(t.throw(e))}catch(l){i(l)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,n);o((t=t.apply(l,a)).next())}));var l,a,t}))};!0===L.get("hide-upload-icon-help-modal",!1)?e():K.openModal(!0,e)}}]),te={},ie=s((()=>{let e={},l=`/api/plugin/miao/help/theme/$s?token=${C.liteToken}&_v=${X.cacheVer}`,a=l.replace("$s","bg"),t=l.replace("$s","main");return X.mainB64&&(t=X.mainB64),e.background=`url(${t}) top left/100% auto no-repeat,url(${a})`,e}));function se(e,l){let a=document.getElementById(e);te[e]||(te[e]=!0,a.addEventListener("change",(e=>{let t=e.target.files;if(0!==t.length){let e=t[0],i=new FileReader;i.readAsDataURL(e),i.onload=()=>{l(i.result),a.value=null}}}))),a.click()}const ne=()=>{le.value=!0},oe=(e,l,a,t)=>{Z("update:modelData",{show:!0,cell:e,cellIndex:l,group:a,groupIndex:t})},ce=e=>{let l=[];for(let a=0;a<e.length;a+=3)l.push(e.slice(a,a+3));return l},re=s((()=>document.body.clientWidth>850?1:document.body.clientWidth/850));return(l,a)=>{const t=n("Icon"),i=n("a-button"),s=n("a-input");return o(),c("div",{style:u(`transform: scale(${re.value});transform-origin: center top;`)},[r("div",{class:"wrap",style:u(ie.value)},[r("div",D,[O,U,d(m(v),{trigger:["click"],dropMenuList:ae.value},{default:p((()=>[d(i,{style:u(`transform: scale(${1/re.value});transform-origin: right top;`),type:"primary",shape:"circle",size:"large"},{default:p((()=>[d(t,{icon:"akar-icons:image"})])),_:1},8,["style"])])),_:1},8,["dropMenuList"])]),r("div",{class:"head-box",onClick:ne},[r("div",z,g(e.helpCfg.title),1),r("div",F,g(e.helpCfg.subTitle),1)]),(o(!0),c(h,null,f(e.helpList,((l,a)=>(o(),c("div",{class:"cont-box",key:a},[r("div",{class:"help-group",onClick:e=>oe(null,null,l,a)},g(l.group),9,P),l.list&&l.list.length>0?(o(),c("div",R,[(o(!0),c(h,null,f(ce(l.list),((t,i)=>(o(),c("div",{class:"tr",key:i},[(o(!0),c(h,null,f(t,((t,s)=>(o(),c("div",{class:b(["td",t===e.modelData.cell?"active":"inactive"]),key:s,onClick:e=>oe(t,3*i+s,l,a)},[d(y,{name:"fade-transition"},{default:p((()=>[r("div",null,[r("div",{class:"help-icon",style:u(`background: url(${e.iconB64List[t.icon]}) 0 0 no-repeat`)},null,4),r("div",T,g(t.title),1),r("div",W,g(t.desc),1)])])),_:2},1024)],10,S)))),128))])))),128))])):k("",!0)])))),128)),r("div",E,[j(" Created By Yunzai-Bot "),r("span",V,g(e.versions.yunzai),1),j(" & Miao-Plugin "),r("span",A,g(e.versions.miao),1)])],4),d(m(B),{visible:le.value,"onUpdate:visible":a[2]||(a[2]=e=>le.value=e),title:"编辑标题",closable:!1,footer:null},{default:p((()=>[r("div",H,[r("div",Y,[N,r("div",Q,[d(s,{value:e.helpCfg.title,"onUpdate:value":a[0]||(a[0]=l=>e.helpCfg.title=l),placeholder:"主标题"},null,8,["value"])])]),r("div",q,[G,r("div",J,[d(s,{value:e.helpCfg.subTitle,"onUpdate:value":a[1]||(a[1]=l=>e.helpCfg.subTitle=l),placeholder:"附标题"},null,8,["value"])])])])])),_:1},8,["visible"]),d(I,{helpList:e.helpList,modelData:e.modelData,iconB64List:e.iconB64List},null,8,["helpList","modelData","iconB64List"]),d(_,{onRegister:m(w)},null,8,["onRegister"])],4)}}}),[["__scopeId","data-v-4eeeea14"]]);export{K as default};
