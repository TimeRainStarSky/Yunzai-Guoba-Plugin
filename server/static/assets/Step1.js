import{b as t,r as e,G as o,d6 as s,o as r,i as a,j as i,d8 as n,d3 as m,a0 as p,a1 as l,x as u,bD as d,af as j}from"./index.js";import{a as f}from"./hooks.js";import c from"./Step1-1.js";import v from"./Step1-2.js";import x from"./Step1-3.js";import _ from"./Step1-4.js";import{a as h}from"./common.js";import{l as y}from"./lodash.default.js";import"./BasicForm.js";import"./index4.js";import"./find.js";import"./_baseIteratee.js";import"./get.js";import"./index5.js";import"./index6.js";import"./useFormItem.js";/* empty css      */import"./transButton.js";import"./index2.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./upperFirst.js";import"./download.js";import"./index7.js";import"./index8.js";import"./uniqBy.js";/* empty css                                                      */import"./ModeBox.js";import"./StepBtn.js";import"./throttle.js";import"./merge.js";const S=t({__name:"Step1",setup(t){const{createMessage:S,createConfirm:g,createWarningModal:w}=j(),[,{models:B,stepStore:F}]=f({},{}),P=e(0),b=[c,v,x,_],k=o((()=>({onPrev:I,onNext:M})));function I(){let t=P.value-1;2===t&&"full"===B.value.mode&&t--,t<0?S.warn("已是第一步"):P.value=t}function M(){let t=P.value+1;if(2===t&&"full"===B.value.mode&&t++,t===b.length){g({title:"开始迁移",iconType:"warning",content:"你已完成所有的准备工作，请确认是否全部配置正确，并开始迁移吗？",okText:"开始迁移",onOk(){return t=this,e=null,o=function*(){yield s.post({url:"/v2-transfer/start",params:{config:y.omit(B.value,"jsPluginInfo")}});for(let t=0;t<3;t++){if(yield F.updateStatus(),0!==F.status.state)return;yield h(300)}w({title:"错误",content:"获取启动状态失败，请手动刷新页面重试"})},new Promise(((s,r)=>{var a=t=>{try{n(o.next(t))}catch(e){r(e)}},i=t=>{try{n(o.throw(t))}catch(e){r(e)}},n=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,i);n((o=o.apply(t,e)).next())}));var t,e,o}})}else P.value=t}return(t,e)=>(r(),a(d,{name:"fade-slide",appear:""},{default:i((()=>[(r(),a(n,null,[(r(),a(m(b[P.value]),p(l(u(k))),null,16))],1024))])),_:1}))}});export{S as default};
